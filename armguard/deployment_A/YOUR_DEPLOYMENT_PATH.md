# ğŸ¯ YOUR RECOMMENDED DEPLOYMENT PATH

**Server:** Ubuntu at 192.168.0.10 (rds@rds)  
**Project Location:** ~/ARMGUARD_RDS_v.2/armguard  
**Goal:** Production deployment

---

## âœ… RECOMMENDED: Use Ubuntu Auto-Deploy

Based on your setup, here's your **optimal deployment path**:

```bash
# On your server (rds@rds:~)

# 1. Navigate to deployment folder
cd ~/ARMGUARD_RDS_v.2/armguard/deployment_A

# 2. Run Ubuntu-optimized deployment
sudo bash ubuntu-deploy.sh --production
```

---

## ğŸ“‹ What Will Happen

### **Auto-Detection Phase** (30 seconds)
```
âœ… Detect Ubuntu version
âœ… Detect hardware (CPU cores, RAM)
âœ… Find your project at ~/ARMGUARD_RDS_v.2/armguard
âœ… Calculate optimal workers
âœ… Choose best database (likely PostgreSQL)
```

### **Configuration Prompts** (2 minutes)
You'll be asked:
```
Project directory [/home/rds/ARMGUARD_RDS_v.2/armguard]: <PRESS ENTER>
Domain name [armguard.local]: <PRESS ENTER or type your domain>
Server IP [192.168.0.10]: <PRESS ENTER>
Use existing location? [Y/n]: Y <PRESS ENTER>  â† IMPORTANT! Use existing repo
Configure SSL? [yes]: <PRESS ENTER>
SSL type: 1 (mkcert for LAN) or 2 (Let's Encrypt for public)
Use PostgreSQL? [yes]: <PRESS ENTER>
Database password: <PRESS ENTER to auto-generate>
```

### **Installation Phase** (5-10 minutes)
```
âœ… Install system packages (nginx, postgresql, redis, etc.)
âœ… Create Python virtual environment
âœ… Install Python dependencies
âœ… Setup PostgreSQL database
âœ… Generate Django configuration (.env file)
âœ… Setup SSL certificates
âœ… Create systemd services
âœ… Configure nginx
âœ… Run database migrations
âœ… Start all services
```

### **Completion** (Ready to use!)
```
âœ… Services running:
   - gunicorn-armguard (Django app)
   - daphne-armguard (WebSockets)
   - nginx (reverse proxy)
   - postgresql (database)
   - redis (caching)

âœ… Access your application:
   https://192.168.0.10
   https://armguard.local
```

---

## ğŸ”„ Future Updates (Easy!)

Since you used the existing repo location, updating is simple:

```bash
# 1. Pull latest code
cd ~/ARMGUARD_RDS_v.2
git pull origin main

# 2. Update application
cd armguard
source .venv/bin/activate
pip install -r requirements.txt --upgrade
python manage.py migrate
python manage.py collectstatic --noinput

# 3. Restart services
sudo systemctl restart gunicorn-armguard
sudo systemctl restart nginx
```

---

## ğŸ› ï¸ Alternative (Fallback Only)

If you need manual troubleshooting only, use direct production script fallback:

```bash
cd ~/ARMGUARD_RDS_v.2/armguard/deployment_A/methods/production
sudo bash deploy-armguard.sh
```

For normal deployments, always use:

```bash
cd ~/ARMGUARD_RDS_v.2/armguard/deployment_A
sudo bash ubuntu-deploy.sh --production
```

---

## ğŸ“Š Post-Deployment Verification

After deployment completes:

### **1. Check Services**
```bash
sudo systemctl status gunicorn-armguard
sudo systemctl status armguard-daphne
sudo systemctl status nginx
sudo systemctl status postgresql
sudo systemctl status redis-server
```

### **2. Run Health Check**
```bash
cd ~/ARMGUARD_RDS_v.2/armguard/deployment_A/methods/production
sudo bash health-check.sh
```

### **3. Test Access**
```bash
# Get server IP
hostname -I

# Open in browser:
https://192.168.0.10
https://armguard.local
```

### **4. View Logs (if issues)**
```bash
# Application logs
sudo journalctl -u gunicorn-armguard -f

# Nginx logs
sudo tail -f /var/log/nginx/error.log

# Deployment logs
ls -la /var/log/armguard-deploy/
tail -f /var/log/armguard-deploy/ubuntu-deploy-*.log
```

---

## ğŸ”§ Configuration Details

Your deployment will create:

### **Files Created:**
```
~/ARMGUARD_RDS_v.2/armguard/
    â”œâ”€â”€ .env                          â†’ Django configuration
    â”œâ”€â”€ .venv/                        â†’ Python virtual environment
    â”œâ”€â”€ db.sqlite3 or PostgreSQL DB   â†’ Database
    â””â”€â”€ static/                       â†’ Static files

/etc/systemd/system/
    â”œâ”€â”€ gunicorn-armguard.service     â†’ App server service
    â””â”€â”€ daphne-armguard.service       â†’ WebSocket service

/etc/nginx/sites-available/
    â””â”€â”€ armguard                      â†’ Nginx configuration

/etc/ssl/certs/ or ~/.local/share/mkcert/
    â””â”€â”€ armguard certificates         â†’ SSL certificates
```

### **Services Running:**
```
Port 80/443  â†’ Nginx (reverse proxy)
Port 8000    â†’ Gunicorn (Django app)
Port 8001    â†’ Daphne (WebSockets)
Port 5432    â†’ PostgreSQL  (database)
Port 6379    â†’ Redis (cache/channels)
```

---

## âš™ï¸ Environment Variables (.env)

Auto-generated by deployment:

```bash
DJANGO_SECRET_KEY=<auto-generated-secure-key>
DJANGO_DEBUG=False
ALLOWED_HOSTS=armguard.local,192.168.0.10

DATABASE_ENGINE=django.db.backends.postgresql
DATABASE_NAME=armguard_db
DATABASE_USER=armguard_user
DATABASE_PASSWORD=<auto-generated>
DATABASE_HOST=localhost
DATABASE_PORT=5432

REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=<auto-generated>

NETWORK_TYPE=lan
SERVER_LAN_IP=192.168.0.10
```

---

## ğŸš¨ Important Notes

### **During Deployment:**
1. **When asked "Use existing location?"** â†’ Answer **Y** (yes)
   - This lets you easily update with `git pull`
   - No need to copy files

2. **SSL Certificate Choice:**
   - **mkcert** â†’ For LAN-only (192.168.x.x)
   - **Let's Encrypt** â†’ For public domain (requires DNS)

3. **Database Password:**
   - Press ENTER to auto-generate secure password
   - Or type your own (save it somewhere safe!)

### **After Deployment:**
1. The deployment creates a **backup before any changes**
2. All passwords are saved in `.env` file
3. Services auto-start on system reboot
4. Logs are rotated automatically

---

## ğŸ’¡ Quick Reference

| Command | Purpose |
|---------|---------|
| `sudo systemctl status gunicorn-armguard` | Check app status |
| `sudo systemctl restart gunicorn-armguard` | Restart app |
| `sudo journalctl -u gunicorn-armguard -f` | View app logs |
| `cd ~/ARMGUARD_RDS_v.2 && git pull` | Get updates |
| `sudo bash health-check.sh` | Verify deployment |
| `sudo systemctl restart nginx` | Restart web server |

---

## ğŸ“š Documentation References

- [DEPLOYMENT_ORGANIZATION.md](DEPLOYMENT_ORGANIZATION.md) - Complete deployment guide
- [DEPLOYMENT_FLOW_DIAGRAM.md](DEPLOYMENT_FLOW_DIAGRAM.md) - Script relationships  
- [QUICK_DEPLOY_GUIDE.md](QUICK_DEPLOY_GUIDE.md) - Quick start guide
- [UBUNTU_DEPLOYMENT_GUIDE.md](UBUNTU_DEPLOYMENT_GUIDE.md) - Ubuntu-specific details

---

## ğŸ¯ YOUR NEXT STEP

**Right now, on your server, run:**

```bash
cd ~/ARMGUARD_RDS_v.2
git pull origin main
cd armguard/deployment_A
sudo bash ubuntu-deploy.sh --production
```

**Then follow the prompts and you'll be deployed in ~10 minutes!** ğŸš€

---

## â“ Need Help?

**If deployment fails:**
1. Check logs: `/var/log/armguard-deploy/`
2. Run: `sudo bash health-check.sh`
3. Review error messages in terminal
4. Check service status: `sudo systemctl status gunicorn-armguard`

**Common issues:**
- **Port already in use** â†’ Check what's using port 80/443
- **Database connection failed** â†’ Check PostgreSQL is running
- **Permission denied** â†’ Make sure you're using `sudo`
- **Python package errors** â†’ Check internet connection

Good luck with your deployment! ğŸ‰
